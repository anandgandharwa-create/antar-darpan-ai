<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Divine Access | Spin</title>
</head>

<body style="
margin:0;
font-family:system-ui,sans-serif;
background:#0b0b0f;
color:#ffffff;
text-align:center;
padding-top:60px;
">

<h2 style="color:#ffd369;">Divine Access</h2>
<p style="color:#aaa;">‡§ä‡§∞‡•ç‡§ú‡§æ ‡§∏‡§Ç‡§∞‡•á‡§ñ‡§ø‡§§ ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à</p>

<!-- SPIN WHEEL -->
<div id="wheel" style="
width:220px;
height:220px;
margin:40px auto;
border-radius:50%;
background:conic-gradient(
red, orange, yellow, green, cyan, blue, violet, red
);
box-shadow:0 0 30px rgba(255,255,255,0.3);
">
</div>

<!-- BUTTON -->
<button onclick="startSpin()" style="
padding:16px 32px;
border-radius:30px;
border:none;
background:#ffd369;
font-size:18px;
font-weight:bold;
">
TAP ‡§ï‡§∞‡•á‡§Ç
</button>

<!-- AUDIO -->
<audio id="spinSound" src="spin.mp3" preload="auto" loop></audio>

<script>
let angle = 0;
let spinning = false;

const sound = document.getElementById("spinSound");
sound.volume = 0.7; // initial volume

function startSpin(){
  if(spinning) return;
  spinning = true;

  /* üîä SOUND START (mobile-safe) */
  sound.currentTime = 0;
  const playPromise = sound.play();
  if (playPromise !== undefined) {
    playPromise.catch(() => {}); // avoid autoplay error
  }

  const wheel = document.getElementById("wheel");
  let start = Date.now();
  let duration = 5500;     // 5.5 sec spin
  let startSpeed = 42;     // fast start

  const interval = setInterval(()=>{
    let elapsed = Date.now() - start;
    let progress = elapsed / duration;
    if(progress > 1) progress = 1;

    let speed = startSpeed * (1 - progress);
    angle += speed;
    wheel.style.transform = "rotate(" + angle + "deg)";

    /* üîâ FADE OUT SOUND LAST 1.2s */
    if(duration - elapsed < 1200){
      sound.volume = Math.max(0, sound.volume - 0.03);
    }

    if(elapsed >= duration){
      clearInterval(interval);
      spinning = false;
      sound.pause();
      sound.volume = 0.7; // reset for next time
      setTimeout(goNext, 600);
    }
  }, 30);
}

function goNext(){
  window.location.href = "meter.html";
}
</script>

</body>
</html>
