<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thought Spin Calculator</title>

<style>
body{
  font-family: system-ui, sans-serif;
  background:#0f1115;
  color:#fff;
  margin:0;
  padding:20px;
}

.screen{ display:none; }
.active{ display:block; }

h2{text-align:center;}
.small{opacity:.8;font-size:14px;text-align:center;}

.question{margin:20px 0;}
button.option{
  display:block;width:100%;margin:8px 0;padding:12px;
  background:#222;color:#fff;border:1px solid #444;
  border-radius:10px;font-size:15px;
}
button.option.active{background:#fff;color:#000;}

.main-btn{
  margin-top:20px;width:100%;padding:14px;
  font-size:16px;border:none;border-radius:20px;
}

/* -------- Spin Wheel -------- */
.wheel-container{
  width:240px;
  height:240px;
  margin:30px auto;
  position:relative;
}

.wheel{
  width:100%;
  height:100%;
  border-radius:50%;
  background:conic-gradient(
    #2ecc71 0deg 90deg,
    #f1c40f 90deg 180deg,
    #e67e22 180deg 270deg,
    #e74c3c 270deg 360deg
  );
  transition:transform 3s ease-out;
}

.pointer{
  position:absolute;
  top:-10px;
  left:50%;
  transform:translateX(-50%);
  width:0;height:0;
  border-left:10px solid transparent;
  border-right:10px solid transparent;
  border-bottom:20px solid #fff;
}

.result{
  text-align:center;
  font-size:20px;
  margin-top:15px;
}
</style>
</head>

<body>

<!-- SCREEN 1 : INPUT -->
<div id="screen1" class="screen active">
  <h2>अपने आप से सच बोलें</h2>
  <p class="small">ईमानदार उत्तर → सही reading</p>

  <div class="question" data-q="0">
    <b>1. क्या मन बेचैन है?</b>
    <button class="option" data-score="2">हाँ, बहुत</button>
    <button class="option" data-score="1">थोड़ा</button>
    <button class="option" data-score="0">नहीं</button>
  </div>

  <div class="question" data-q="1">
    <b>2. क्या कोई इच्छा भीतर चल रही है?</b>
    <button class="option" data-score="2">हाँ</button>
    <button class="option" data-score="1">स्पष्ट नहीं</button>
    <button class="option" data-score="0">नहीं</button>
  </div>

  <div class="question" data-q="2">
    <b>3. क्या मन अभी शांत बैठ सकता है?</b>
    <button class="option" data-score="2">नहीं</button>
    <button class="option" data-score="1">कुछ देर</button>
    <button class="option" data-score="0">हाँ</button>
  </div>

  <button class="main-btn" onclick="goToSpin()">Spin Wheel</button>
</div>

<!-- SCREEN 2 : SPIN + RESULT -->
<div id="screen2" class="screen">
  <h2>Thought Spin</h2>

  <div class="wheel-container">
    <div class="pointer"></div>
    <div id="wheel" class="wheel"></div>
  </div>

  <button class="main-btn" onclick="spin()">घुमाएँ</button>

  <div id="state" class="result"></div>
  <p id="line" class="small"></p>

  <button class="main-btn" onclick="reset()">फिर से जाँचें</button>
</div>

<script>
const answers=[null,null,null];

const states=[
  ["शांति / साक्षी","कुछ पकड़ में नहीं है"],
  ["स्मृति / आदत","मन अतीत की लय में है"],
  ["इच्छा / द्वंद्व","कुछ चाह या निर्णय चल रहा है"],
  ["चिन्ता / भय","मन किसी विचार से जकड़ा है"]
];

document.querySelectorAll(".option").forEach(btn=>{
  btn.onclick=function(){
    const q=this.parentElement.dataset.q;
    answers[q]=Number(this.dataset.score);
    this.parentElement.querySelectorAll(".option")
      .forEach(b=>b.classList.remove("active"));
    this.classList.add("active");
  }
});

let finalIndex=0;

function goToSpin(){
  if(answers.includes(null)){
    alert("तीनों सवालों के उत्तर दें");
    return;
  }
  const total=answers.reduce((a,b)=>a+b,0);

  if(total===0) finalIndex=0;
  else if(total<=2) finalIndex=1;
  else if(total<=4) finalIndex=2;
  else finalIndex=3;

  document.getElementById("screen1").classList.remove("active");
  document.getElementById("screen2").classList.add("active");
}

function spin(){
  const wheel=document.getElementById("wheel");
  const angle=360*3 + finalIndex*90;
  wheel.style.transform=`rotate(${angle}deg)`;

  setTimeout(()=>{
    document.getElementById("state").innerText=states[finalIndex][0];
    document.getElementById("line").innerText=states[finalIndex][1];
    navigator.vibrate?.(40);
  },3000);
}

function reset(){
  location.reload();
}
</script>

</body>
</html>
